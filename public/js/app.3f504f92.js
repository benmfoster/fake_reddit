(function(t){function e(e){for(var o,i,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)i=r[d],n[i]&&m.push(n[i][0]),n[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],o=!0,r=1;r<s.length;r++){var l=s[r];0!==n[l]&&(o=!1)}o&&(a.splice(e--,1),t=i(i.s=s[0]))}return t}var o={},n={app:0},a=[];function i(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=o,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"05ee":function(t,e,s){},1267:function(t,e,s){},"45f5":function(t,e,s){"use strict";var o=s("1267"),n=s.n(o);n.a},"4c9f":function(t,e,s){"use strict";var o=s("ce43"),n=s.n(o);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var o=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"site-main"},[s("div",{staticClass:"header"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-8"},[s("h1",{staticClass:"site-title"},[s("router-link",{attrs:{to:"/"}},[t._v("Fake Reddit")]),s("span",[t._v(".")])],1),s("p",{staticClass:"site-description"},[t._v("Misanthropes pile-driving the internet.")])])])])]),s("nav",{staticClass:"navbar navbar-default"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"amalia-navbar-collapse"}},[s("ul",{staticClass:"nav navbar-nav"},[s("li",[s("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),t.isLoggedIn()?s("li",[s("router-link",{attrs:{to:"/posts/new"}},[t._v("New Post")])],1):t._e(),t.isLoggedIn()?s("li",[s("router-link",{attrs:{to:"/users/"+t.currentUserId()}},[t._v("My Profile")])],1):t._e(),t.isLoggedIn()?s("li",[s("router-link",{attrs:{to:"/logout"}},[t._v("Logout")])],1):t._e(),t.isLoggedIn()?t._e():s("li",[s("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1),t.isLoggedIn()?t._e():s("li",{staticClass:"cta"},[s("router-link",{attrs:{to:"/signup"}},[t._v("Sign Up")])],1)])])])]),s("router-view",{key:t.$route.path}),t._m(1)],1)])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navbar-header"},[s("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#amalia-navbar-collapse","aria-expanded":"false"}},[s("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),s("span",{staticClass:"icon-bar"}),s("span",{staticClass:"icon-bar"}),s("span",{staticClass:"icon-bar"})])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer",staticStyle:{"background-image":"url('img/amalia-image-footer.jpg')"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("h3",[t._v("Fake Reddit"),s("span",[t._v(".")])])])])])])}],i=s("bc3a"),r=s.n(i),l={methods:{isLoggedIn:function(){return!!localStorage.getItem("jwt")},currentUserId:function(){return localStorage.getItem("current_user_id")}}},c=l,u=s("2877"),d=Object(u["a"])(c,n,a,!1,null,null,null),m=d.exports,p=s("8c4f"),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"signup"},[s("div",{staticClass:"container"},[s("form",{staticStyle:{"margin-bottom":"20px"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("h1",[t._v("Signup")]),s("ul",t._l(t.errors,function(e){return s("li",{staticClass:"text-danger"},[t._v(t._s(e))])}),0),s("div",{staticClass:"form-group"},[s("label",[t._v("Name:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Email:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Profile Picture:")]),s("input",{ref:"fileInput",attrs:{type:"file"},on:{change:function(e){return t.setFile(e)}}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Password confirmation:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordConfirmation,expression:"passwordConfirmation"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.passwordConfirmation},on:{input:function(e){e.target.composing||(t.passwordConfirmation=e.target.value)}}})]),s("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Submit"}})])])])},f=[],g=(s("7f7f"),{data:function(){return{name:"",email:"",password:"",passwordConfirmation:"",newProfilePicture:"",errors:[]}},methods:{setFile:function(t){t.target.files.length>0&&(this.newProfilePicture=t.target.files[0])},submit:function(){var t=this,e=new FormData;e.append("name",this.name),e.append("email",this.email),e.append("profile_picture_url",this.newProfilePicture),e.append("password",this.password),e.append("password_confirmation",this.passwordConfirmation),r.a.post("/api/users",e).then(function(e){t.$router.push("/login")}).catch(function(e){t.errors=e.response.data.errors})}}}),_=g,h=Object(u["a"])(_,v,f,!1,null,null,null),w=h.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"container"},[s("form",{staticStyle:{"margin-bottom":"20px"},on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("h1",[t._v("Login")]),s("ul",t._l(t.errors,function(e){return s("li",{staticClass:"text-danger"},[t._v(t._s(e))])}),0),s("div",{staticClass:"form-group"},[s("label",[t._v("Email:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",[t._v("Password:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("input",{staticClass:"btn btn-primary",attrs:{type:"submit",value:"Submit"}})])])])},b=[],x={data:function(){return{email:"",password:"",errors:[]}},methods:{submit:function(){var t=this,e={email:this.email,password:this.password};r.a.post("/api/sessions",e).then(function(e){r.a.defaults.headers.common["Authorization"]="Bearer "+e.data.jwt,localStorage.setItem("jwt",e.data.jwt),localStorage.setItem("current_user_id",e.data.user_id),t.$router.push("/")}).catch(function(e){t.errors=["Invalid email or password."],t.email="",t.password=""})}}},y=x,P=Object(u["a"])(y,C,b,!1,null,null,null),S=P.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"logout"})},I=[],N={created:function(){delete r.a.defaults.headers.common["Authorization"],localStorage.removeItem("jwt"),this.$router.push("/"),this.current_user_id={}}},T=N,E=Object(u["a"])(T,k,I,!1,null,null,null),j=E.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-show"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("h3",{staticStyle:{"text-align":"center"}},[t._v("Recent Posts")]),t._l(t.posts,function(e){return s("div",{key:e.id},[s("article",[s("div",{staticClass:"news-container"},[t.isMostHated(e)?s("h2",[t._v("Most Hated: ")]):t._e(),s("h1",{staticClass:"news-title"},[s("router-link",{attrs:{to:"../posts/"+e.id}},[t._v(t._s(e.title))])],1),s("span",{staticClass:"news-date"},[t._v(t._s(e.last_edited))]),s("div",{staticClass:"news-entry"},[s("p",[t._v(t._s(t.shortener(e.text)))])]),s("div",{staticClass:"news-footer"},[s("i",{staticClass:"fa fa-comments-o"}),s("router-link",{attrs:{to:"/posts/"+e.id}},[t._v(" Comments "+t._s(e.comments.length)+" ")]),t.isLoggedIn()?s("span",[s("button",{staticClass:"btn btn-danger",class:{hide:!(1==t.current_user.downvoted_post_ids[e.id])},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(s){return t.removeDownvote(e)}}},[t._v("↓ "+t._s(e.total_downvotes))]),s("button",{staticClass:"btn btn-primary",class:{hide:1==t.current_user.downvoted_post_ids[e.id]},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(s){return t.downvote(e)}}},[t._v("↓ "+t._s(e.total_downvotes))])]):s("span",[s("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"}},[t._v("↓ "+t._s(e.total_downvotes))])])],1)])])])})],2),s("div",{staticClass:"col-md-4"},[s("section",{staticClass:"widget widget_about"},[s("div",{staticClass:"about-photo"},[s("img",{attrs:{src:t.user.profile_picture,alt:""}})]),s("div",{staticClass:"about-author"},[s("router-link",{attrs:{to:"/users/"+t.user.id}},[s("h3",[t._v(t._s(t.user.name))])])],1),s("router-link",{attrs:{to:t.user.id+"/edit"}},[t.isLoggedIn()&&t.current_user.id==t.user.id?s("button",{staticClass:"btn btn-light"},[t._v("Edit Profile")]):t._e()])],1)])])])])])},O=[],U={data:function(){return{user:{},posts:{},current_user:{},showComments:!1}},created:function(){var t=this;r.a.get("/api/users/"+this.$route.params.id).then(function(e){t.user=e.data,t.posts=t.user.posts.reverse()}),r.a.get("/api/users/"+localStorage.getItem("current_user_id")).then(function(e){t.current_user=e.data})},methods:{removeDownvote:function(t){r.a.delete("/api/downvotes/"+t.id).then(function(t){console.log("Success!",t.data)}),this.current_user.downvoted_post_ids[t.id]=!1,t.total_downvotes--},downvote:function(t){var e=this;console.log(t);var s={post_id:t.id};r.a.post("/api/downvotes",s).then(function(t){console.log("Success!",t.data)}).catch(function(t){e.errors=t.response.data.errors,e.status=t.response.status}),this.current_user.downvoted_post_ids[t.id]=!0,t.total_downvotes++},toggleComments:function(){1==this.showComments?this.showComments=!1:this.showComments=!0},shortener:function(t){return t.substring(0,500)+" [...]"},isLoggedIn:function(){return!!localStorage.getItem("jwt")},isMostHated:function(t){return localStorage.getItem("mostHatedId")==t.id}}},$=U,D=(s("45f5"),Object(u["a"])($,H,O,!1,null,null,null)),L=D.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"users-edit"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("h1",[t._v("Edit Profile")]),s("ul",t._l(t.errors,function(e){return s("li",[t._v(t._s(e))])}),0),s("section",{staticClass:"widget widget_about"},[s("div",{staticClass:"news-image"},[s("img",{attrs:{src:t.user.profile_picture,alt:""}})])]),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"input-lg form-control",attrs:{type:"text",id:"name",placeholder:"name"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"input-lg form-control",attrs:{type:"text",id:"email",placeholder:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{ref:"fileInput",attrs:{type:"file"},on:{change:function(e){return t.setFile(e)}}})]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})])]),s("button",{staticClass:"btn btn-block btn-square btn-lg btn-secondary",attrs:{type:"submit"}},[t._v("Update")]),s("router-link",{attrs:{to:"/logout"}},[s("button",{staticClass:"btn btn-block btn-square btn-danger btn-lg",on:{click:function(e){return t.destroyUser()}}},[t._v("Delete Account")])])],1)])])])])])},F=[],M={data:function(){return{errors:[],user:{},newProfilePicture:""}},created:function(){var t=this;r.a.get("/api/users/"+this.$route.params.id).then(function(e){t.user=e.data,console.log(t.user)}),r.a.get("/api/comments/").then(function(e){t.comments=e.data,console.log(t.comments)})},methods:{setFile:function(t){t.target.files.length>0&&(this.newProfilePicture=t.target.files[0])},submit:function(){var t=this,e=new FormData;e.append("name",this.user.name),e.append("email",this.user.email),e.append("profile_picture_url",this.newProfilePicture),e.append("password",this.user.password),e.append("id",this.user.id),r.a.patch("/api/users/"+this.user.id,e).then(function(e){console.log("Success!",e.data),t.$router.push("/users/"+t.user.id)}).catch(function(e){t.errors=e.response.data.errors})},destroyUser:function(){var t=this;if(confirm("Do you really want to delete "+this.user.name+"?"))for(var e=0;e<this.user.posts.length;e++)r.a.delete("api/posts/"+this.user.posts[e].id).then(function(t){console.log("Success!",t.data)});for(e=0;e<this.user.comments.length;e++)r.a.delete("api/comments/"+this.user.comments[e].id).then(function(t){console.log("Success!",t.data)});for(e=0;e<this.comments.length;e++){var s={tagged_user_id:-1};this.comments[e].tagged_user_id==this.user.id&&r.a.patch("api/comments/"+this.comments[e].id,s).then(function(t){console.log("Success!",t.data)})}r.a.delete("/api/users/"+this.user.id).then(function(e){console.log("Success!",e.data),t.$router.push("/logout")})}}},q=M,R=Object(u["a"])(q,z,F,!1,null,null,null),A=R.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"posts-index"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8 col-md-offset-2"},[s("div",{staticClass:"row"},[t.isLoggedIn()&&t.current_user.notifications.length>0?s("div",[s("h5",[t._v("Notifications")]),t._l(t.sortedNotifications,function(e){return s("div",[1==e.tag?s("p",{attrs:{onmouseover:t.deleteNotification(e.id)}},[s("router-link",{attrs:{to:"/users/"+e.commenter_id}},[t._v("\n                    "+t._s(t.commenter(e.commenter_id))+"\n                  ")]),t._v("\n\n                   tagged you in a comment on \n                   "),s("router-link",{attrs:{to:"/posts/"+e.post_id}},[t._v("\n                    "+t._s(t.post(e.post_id))+"\n                   ")]),t._v("\n\n                   . "+t._s(e.created_at)+"\n                ")],1):s("p",{attrs:{onmouseover:t.deleteNotification(e.id)}},[s("router-link",{attrs:{to:"/users/"+e.commenter_id}},[t._v("\n                    "+t._s(t.commenter(e.commenter_id))+"\n                  ")]),t._v("\n\n                   commented on \n                   "),s("router-link",{attrs:{to:"/posts/"+e.post_id}},[t._v("\n                    "+t._s(t.post(e.post_id))+"\n                   ")]),t._v("\n\n                   . "+t._s(e.created_at)+"\n                ")],1)])})],2):t._e(),s("div",{staticClass:"col-md-12"},[s("article",{staticClass:"post"},[s("div",{staticClass:"news-container"},[s("span",{staticClass:"news-category"},[s("router-link",{attrs:{to:"users/"+t.mostHatedPost.author_id}},[t._v(t._s(t.mostHatedPost.authored_by))])],1),s("router-link",{attrs:{to:"posts/"+t.mostHatedPost.id}},[s("h2",[t._v("Most Hated:")]),s("h1",{staticClass:"news-title"},[t._v(t._s(t.mostHatedPost.title))])]),s("span",{staticClass:"news-date"},[t._v(t._s(t.mostHatedPost.date))]),s("div",{staticClass:"news-entry"},[s("p",[t._v(t._s(t.shortener(t.mostHatedPost.text)))])]),s("div",{staticClass:"news-footer"},[s("i",{staticClass:"fa fa-comments-o"}),s("router-link",{attrs:{to:"posts/"+t.mostHatedPost.id}},[t._v(" Comments "+t._s(t.mostHatedPost.comments.length)+" ")]),t.isLoggedIn()?s("span",[s("button",{staticClass:"btn btn-danger",class:{hide:!(1==t.current_user.downvoted_post_ids[t.mostHatedPost.id])},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(e){return t.removeDownvote(t.mostHatedPost)}}},[t._v("↓ "+t._s(t.mostHatedPost.total_downvotes))]),s("button",{staticClass:"btn btn-primary",class:{hide:1==t.current_user.downvoted_post_ids[t.mostHatedPost.id]},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(e){return t.downvote(t.mostHatedPost)}}},[t._v("↓ "+t._s(t.mostHatedPost.total_downvotes))])]):s("span",[s("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"}},[t._v("↓ "+t._s(t.mostHatedPost.total_downvotes))])])],1)],1)])]),t._l(t.posts,function(e){return s("div",{key:e.id,staticClass:"col-md-12"},[e.id!=t.mostHatedPost.id?s("article",{staticClass:"post"},[s("div",{staticClass:"news-container"},[s("span",{staticClass:"news-category"},[s("router-link",{attrs:{to:"users/"+e.author_id}},[t._v(t._s(e.authored_by))])],1),s("h2",{staticClass:"news-title"},[s("router-link",{attrs:{to:"posts/"+e.id}},[t._v(t._s(e.title))])],1),s("span",{staticClass:"news-date"},[t._v(t._s(e.date))]),s("div",{staticClass:"news-entry"},[s("p",[t._v(t._s(t.shortener(e.text)))])]),s("div",{staticClass:"news-footer"},[s("ul",[s("span",[s("i",{staticClass:"fa fa-comments-o"}),s("router-link",{attrs:{to:"posts/"+e.id}},[t._v(" Comments "+t._s(e.comments.length)+" ")])],1),t.isLoggedIn()?s("span",[s("button",{staticClass:"btn btn-danger",class:{hide:!(1==t.current_user.downvoted_post_ids[e.id])},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(s){return t.removeDownvote(e)}}},[t._v("↓ "+t._s(e.total_downvotes))]),s("button",{staticClass:"btn btn-primary",class:{hide:1==t.current_user.downvoted_post_ids[e.id]},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(s){return t.downvote(e)}}},[t._v("↓ "+t._s(e.total_downvotes))])]):t._e(),t.isLoggedIn()?t._e():s("span",[s("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"}},[t._v("↓ "+t._s(e.total_downvotes))])])])])])]):t._e()])})],2)])])])])])},J=[],G=(s("55dd"),{data:function(){return{posts:[],users:[],current_user:{},mostHatedPost:{},sortedNotifications:{}}},created:function(){var t=this;1==this.isLoggedIn()&&r.a.get("/api/users/"+localStorage.getItem("current_user_id")).then(function(e){t.current_user=e.data,t.sortedNotifications=t.current_user.notifications.sort(function(t,e){return t.id-e.id})}),r.a.get("/api/users/").then(function(e){t.users=e.data}),r.a.get("/api/posts").then(function(e){t.posts=e.data.reverse(),t.mostHatedPost=t.mostHated(t.posts)})},methods:{removeDownvote:function(t){r.a.delete("/api/downvotes/"+t.id).then(function(t){console.log("Success!",t.data)}),this.current_user.downvoted_post_ids[t.id]=!1,t.total_downvotes--},downvote:function(t){var e=this,s={post_id:t.id};r.a.post("/api/downvotes",s).then(function(t){}).catch(function(t){e.errors=t.response.data.errors,e.status=t.response.status}),this.current_user.downvoted_post_ids[t.id]=!0,t.total_downvotes++},shortener:function(t){return t.substring(0,500)+" [...]"},mostHated:function(t){for(var e=this.posts[0],s=0;s<this.posts.length;s++)this.posts[s].total_downvotes>e.total_downvotes&&(e=this.posts[s]);return localStorage.setItem("mostHatedId",e.id),e},isLoggedIn:function(){return!!localStorage.getItem("jwt")},commenter:function(t){for(var e=0;e<this.users.length;e++)if(t==this.users[e].id)return this.users[e].name},post:function(t){for(var e=0;e<this.posts.length;e++)if(t==this.posts[e].id)return this.posts[e].title},deleteNotification:function(t){r.a.delete("/api/notifications/"+t).then(function(t){console.log("Success!",t.data)})}}}),K=G,Q=(s("9c44"),Object(u["a"])(K,B,J,!1,null,null,null)),V=Q.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"posts-new"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("h1",{staticClass:"text-center"},[t._v("New Post")]),s("ul",t._l(t.errors,function(e){return s("li",[t._v(t._s(e))])}),0),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newPostTitle,expression:"newPostTitle"}],staticClass:"input-lg form-control",attrs:{type:"text",placeholder:"Title:"},domProps:{value:t.newPostTitle},on:{input:function(e){e.target.composing||(t.newPostTitle=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPostText,expression:"newPostText"}],staticClass:"input-lg form-control",attrs:{type:"text",rows:"10",placeholder:"Text:"},domProps:{value:t.newPostText},on:{input:function(e){e.target.composing||(t.newPostText=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{ref:"fileInput",attrs:{type:"file"},on:{change:function(e){return t.setFile(e)}}})]),s("button",{staticClass:"btn btn-block btn-square btn-lg btn-secondary",attrs:{type:"submit"}},[t._v("Submit")])])])])])])])},X=[],Y={data:function(){return{newPostTitle:"",newPostText:"",newPostImage:"",errors:[],status:""}},methods:{setFile:function(t){t.target.files.length>0&&(this.newPostImage=t.target.files[0])},submit:function(){var t=this,e=new FormData;e.append("title",this.newPostTitle),e.append("text",this.newPostText),e.append("image_url",this.newPostImage),r.a.post("/api/posts",e).then(function(e){t.$router.push("/posts/"+e.data.id)}).catch(function(e){t.errors=e.response.data.errors,t.status=e.response.status})}}},Z=Y,tt=Object(u["a"])(Z,W,X,!1,null,null,null),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"site-main posts-show"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("article",[s("div",{staticClass:"news-container"},[t.isMostHated(t.post)?s("span",[s("h2",[t._v("Most Hated:")])]):t._e(),s("h1",{staticClass:"news-title"},[t._v(t._s(t.post.title))]),s("span",{staticClass:"news-date"},[t._v(t._s(t.post.date))]),s("div",{staticClass:"author-info"},[s("small",[t._v("posted by "),s("router-link",{attrs:{to:"../users/"+t.post.author_id}},[t._v(t._s(t.post.authored_by))])],1)]),s("div",{staticClass:"news-image"},[s("img",{attrs:{src:t.post.image_url}})]),s("div",{staticClass:"news-entry"},[s("p",[t._v(t._s(t.post.text))])]),s("div",{staticClass:"news-footer"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-6"}),s("div",{staticClass:"col-md-6"},[s("div",{staticClass:"news-footer-share"},[s("router-link",{attrs:{to:t.post.id}},[t._v("\n                          Comments "+t._s(t.post.comments.length)+"\n                        ")]),t.isLoggedIn()?s("span",[s("button",{staticClass:"btn btn-danger",class:{hide:!(1==t.current_user.downvoted_post_ids[t.post.id])},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(e){return t.removeDownvote(t.post)}}},[t._v("\n                            ↓ "+t._s(t.post.total_downvotes)+"\n                          ")]),s("button",{staticClass:"btn btn-primary",class:{hide:1==t.current_user.downvoted_post_ids[t.post.id]},staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"},on:{click:function(e){return t.downvote(t.post)}}},[t._v("\n                            ↓ "+t._s(t.post.total_downvotes)+"\n                          ")])]):s("span",[s("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"10px","font-size":"40px",padding:"10px"}},[t._v("↓ "+t._s(t.post.total_downvotes))])]),s("router-link",{attrs:{to:t.post.id+"/edit"}},[t.isLoggedIn()&&t.current_user.name==t.post.authored_by?s("button",{staticClass:"btn btn-warning"},[t._v("\n                              Edit Post\n                            ")]):t._e()])],1)])])]),s("div",{staticClass:"news-author-bio"},[s("div",{staticClass:"author-avatar"},[s("router-link",{attrs:{to:"../users/"+t.post.author_id}},[s("img",{attrs:{src:t.post.author_image,alt:""}})])],1),s("div",{staticClass:"author-info"},[s("h4",[s("router-link",{attrs:{to:"../users/"+t.post.author_id}},[t._v(t._s(t.post.authored_by))]),s("small",[t._v("posted this.")])],1)])])])]),s("div",{staticClass:"comments-area",attrs:{id:"comments"}},[t.toggleCommentsHeader()?s("h2",{staticClass:"comments-title"},[t._v("\n                "+t._s(t.numberOfComments)+" comments\n            ")]):t._e(),t._l(t.sortedComments,function(e){return s("ol",{staticClass:"comment-list"},[s("li",[s("div",{staticClass:"comment-author"},[s("img",{staticClass:"avatar",attrs:{src:e.author_image,alt:""}}),s("router-link",{attrs:{to:"../users/"+e.author_id}},[t._v(t._s(e.authored_by))])],1),s("div",{staticClass:"comment-metadata"},[s("time",[t._v(t._s(e.last_edited))])]),s("div",{staticClass:"comment-content"},[s("router-link",{attrs:{to:"/users/"+e.tagged_user_id}},[t._v("\n                      "+t._s(t.findTaggedUserName(e))+"\n                    ")]),t._v("\n                    "+t._s(e.text)+"\n                    "),t.isLoggedIn()&&e.authored_by==t.current_user.name?s("small",[s("span",{staticClass:"underline-on-hover",on:{click:function(s){return t.toggleEditComment(e)}}},[t._v(" Edit ")]),s("span",{staticClass:"underline-on-hover",on:{click:function(s){return t.deleteComment(e)}}},[t._v("Delete")])]):t._e(),t.currentComment===e?s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.commentEditText,expression:"commentEditText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Edit comment."},domProps:{value:t.commentEditText},on:{input:function(e){e.target.composing||(t.commentEditText=e.target.value)}}}),s("button",{on:{click:function(s){return t.submitCommentEdit(e)}}},[t._v("Submit")])]):t._e()],1)])])}),s("ol",{staticClass:"comment-list",class:{hide:0==t.isSubmitted}},[s("li",[s("article",{staticClass:"comment-body"},[s("footer",{staticClass:"comment-meta"},[s("div",{staticClass:"comment-author"},[s("img",{staticClass:"avatar",attrs:{src:t.current_user.profile_picture,alt:""}}),s("router-link",{attrs:{to:"../users/"+t.current_user.id}},[t._v(t._s(t.current_user.name))])],1),s("div",{staticClass:"comment-metadata"})]),s("div",{staticClass:"comment-content"},[s("router-link",{attrs:{to:"/users/"+t.taggedUserId}},[t._v(t._s(t.newCommentTag))]),t._v("\n                      "+t._s(t.showNewComment)+"\n                      "),s("small",[s("span",{staticClass:"underline-on-hover",on:{click:function(e){return t.toggleEditComment(t.newCommentObject)}}},[t._v(" Edit ")]),s("span",{staticClass:"underline-on-hover",on:{click:function(e){return t.deleteComment(t.newCommentObject)}}},[t._v("Delete")])]),t.currentComment===t.newCommentObject?s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.commentEditText,expression:"commentEditText"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Edit comment."},domProps:{value:t.commentEditText},on:{input:function(e){e.target.composing||(t.commentEditText=e.target.value)}}}),s("button",{on:{click:function(e){return t.submitCommentEdit(t.newCommentObject)}}},[t._v("Submit")])]):t._e()],1)])])]),t.isLoggedIn()?s("div",{staticClass:"comment-respond",attrs:{id:"respond"}},[s("h3",{staticClass:"comment-reply-title"},[t._v("Leave a Reply")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.taggedUserName,expression:"taggedUserName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Tag someone. "},domProps:{value:t.taggedUserName},on:{input:function(e){e.target.composing||(t.taggedUserName=e.target.value)}}}),t.taggedUserName.length>0&&t.isShowTaggedUsersDropdown?s("div",[s("div",{staticClass:"dropdown"},[s("div",{staticClass:"dropdown-content"},t._l(t.filteredItems,function(e){return s("div",[s("img",{staticClass:"avatar",attrs:{src:e.profile_picture,alt:"",width:"20px"}}),s("span",{staticStyle:{"margin-left":"8px"},on:{click:function(s){return t.fillSearchBar(e)}}},[t._v(" "+t._s(e.name))])])}),0)])]):t._e()]),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newComment,expression:"newComment"}],staticClass:"form-control",attrs:{rows:"5",placeholder:"Message: "},domProps:{value:t.newComment},on:{input:function(e){e.target.composing||(t.newComment=e.target.value)}}})]),s("button",{staticClass:"btn btn-secondary btn-lg btn-block btn-square btn-bordered",attrs:{type:"submit"}},[t._v("Submit")])])]):t._e()],2)])])])])])},ot=[],nt={data:function(){return{post:{},user:{},current_user:{},errors:[],newComment:"",showNewComment:"",newCommentObject:{},isSubmitted:!1,users:[],taggedUserName:"",taggedUserId:-1,isShowTaggedUsersDropdown:!0,newCommentTag:"",commentEditText:"",currentComment:{},sortedComments:{},numberOfComments:0}},created:function(){var t=this;r.a.get("/api/users/"+this.$route.params.id).then(function(e){t.user=e.data}),r.a.get("/api/users/"+localStorage.getItem("current_user_id")).then(function(e){t.current_user=e.data}),r.a.get("api/users").then(function(e){t.users=e.data}),r.a.get("/api/posts/"+this.$route.params.id).then(function(e){t.post=e.data,t.sortedComments=t.post.comments.sort(function(t,e){return t.id-e.id}),t.numberOfComments=t.post.comments.length})},computed:{filteredItems:function(){var t=this;return this.users.filter(function(e){return e.name.toLowerCase().indexOf(t.taggedUserName.toLowerCase())>-1})}},methods:{removeDownvote:function(t){r.a.delete("/api/downvotes/"+t.id).then(function(t){console.log("Success!",t.data)}),this.current_user.downvoted_post_ids[t.id]=!1,t.total_downvotes--},downvote:function(t){var e=this,s={post_id:t.id};r.a.post("/api/downvotes",s).then(function(t){console.log("Success!",t.data)}).catch(function(t){e.errors=t.response.data.errors,e.status=t.response.status}),this.current_user.downvoted_post_ids[t.id]=!0,t.total_downvotes++},submit:function(){var t=this;if(this.taggedUserName.length>0){for(var e=0;e<this.users.length;e++)if(this.taggedUserName.toLowerCase().substring(1)==this.users[e].name.toLowerCase()){this.taggedUserId=this.users[e].id;var s={user_id:this.users[e].id,post_id:this.post.id,tag:!0};console.log(s)}}else{s={post_id:this.post.id,user_id:this.post.author_id,tag:!1};console.log(s)}this.current_user.id!=this.post.author_id&&r.a.post("/api/notifications",s).then(function(t){console.log(t.data)}).catch(function(e){t.errors=e.response.data.errors,t.status=e.response.status});var o=new FormData;o.append("text",this.newComment),o.append("post_id",this.post.id),o.append("tagged_user_id",this.taggedUserId),r.a.post("/api/comments",o).then(function(e){t.newCommentObject=e.data}).catch(function(e){t.errors=e.response.data.errors,t.status=e.response.status}),this.isSubmitted=!0,this.newCommentTag=this.taggedUserName,this.taggedUserName="",this.showNewComment=this.newComment,this.newComment="",this.numberOfComments+=1},toggleEditComment:function(t){this.currentComment===t?this.currentComment={}:this.currentComment=t,console.log(t.text),this.commentEditText=t.text},submitCommentEdit:function(t){var e=this;t.text=this.commentEditText,this.showNewComment=this.commentEditText;var s={text:this.commentEditText};r.a.patch("/api/comments/"+t.id,s).then(function(t){console.log("Success!",t.data)}).catch(function(t){e.errors=t.response.data.errors,e.status=t.response.status}),this.currentComment={}},deleteComment:function(t){r.a.delete("/api/comments/"+t.id).then(function(t){console.log("Success!",t.data)}),t==this.newCommentObject?this.isSubmitted=!1:this.post.comments.splice(this.post.comments.indexOf(t),1)},toggleCommentsHeader:function(){return this.post.comments.length>0||1==this.isSubmitted},isLoggedIn:function(){return!!localStorage.getItem("jwt")},isMostHated:function(t){return t.id==localStorage.getItem("mostHatedId")},findTaggedUserName:function(t){for(var e=0;e<this.users.length;e++)if(this.users[e].id==t.tagged_user_id)return"@"+this.users[e].name},showTaggedUsersDropdown:function(){this.isShowTaggedUsersDropdown=!0},fillSearchBar:function(t){this.taggedUserName="@"+t.name,this.isShowTaggedUsersDropdown=!1,this.taggedUserId=t.id}}},at=nt,it=(s("4c9f"),Object(u["a"])(at,st,ot,!1,null,null,null)),rt=it.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"posts-edit"},[s("div",{staticClass:"post-entry"},[s("div",{staticClass:"container"},[s("h1",{staticClass:"text-center"},[t._v("Edit Post")]),s("ul",t._l(t.errors,function(e){return s("li",[t._v(t._s(e))])}),0),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit()}}},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"input-lg form-control",attrs:{type:"text",placeholder:"Title:"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.text,expression:"post.text"}],staticClass:"input-lg form-control",attrs:{type:"text",rows:"10",placeholder:"Text:"},domProps:{value:t.post.text},on:{input:function(e){e.target.composing||t.$set(t.post,"text",e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("input",{ref:"fileInput",attrs:{type:"file"},on:{change:function(e){return t.setFile(e)}}})]),s("button",{staticClass:"btn btn-block btn-square btn-lg btn-secondary",attrs:{type:"submit"}},[t._v("Update")]),s("router-link",{attrs:{to:"/../"}},[s("button",{staticClass:"btn btn-block btn-square btn-danger btn-lg",on:{click:function(e){return t.destroyPost()}}},[t._v("Delete Post")])])],1)])])])},ct=[],ut={data:function(){return{errors:[],post:{},newPostImage:""}},created:function(){var t=this;r.a.get("/api/posts/"+this.$route.params.id).then(function(e){t.post=e.data,console.log(t.post)})},methods:{setFile:function(t){t.target.files.length>0&&(this.newPostImage=t.target.files[0])},submit:function(){var t=this,e=new FormData;e.append("title",this.post.title),e.append("text",this.post.text),e.append("image_url",this.newPostImage),e.append("id",this.post.id),r.a.patch("/api/posts/"+this.post.id,e).then(function(e){console.log("Success!",e.data),t.$router.push("/posts/"+t.post.id)}).catch(function(e){t.errors=e.response.data.errors})},destroyPost:function(){var t=this;confirm("Do you really want to delete "+this.post.title+"?")&&r.a.delete("/api/posts/"+this.post.id).then(function(e){console.log("Success!",e.data),t.$router.push("/")})}}},dt=ut,mt=Object(u["a"])(dt,lt,ct,!1,null,null,null),pt=mt.exports;o["a"].use(p["a"]);var vt=new p["a"]({mode:"history",base:"/",routes:[{path:"/",name:"posts-index",component:V},{path:"/posts/new",name:"posts-new",component:et},{path:"/posts/:id",name:"posts-show",component:rt},{path:"/posts/:id/edit",name:"posts-edit",component:pt},{path:"/users/:id",name:"users-show",component:L},{path:"/users/:id/edit",name:"users-edit",component:A},{path:"/signup",name:"signup",component:w},{path:"/login",name:"login",component:S},{path:"/logout",name:"logout",component:j}]});r.a.defaults.baseURL="/";var ft=localStorage.getItem("jwt");ft&&(r.a.defaults.headers.common["Authorization"]="Bearer "+ft),o["a"].config.productionTip=!1,new o["a"]({router:vt,render:function(t){return t(m)}}).$mount("#app")},"9c44":function(t,e,s){"use strict";var o=s("05ee"),n=s.n(o);n.a},ce43:function(t,e,s){}});
//# sourceMappingURL=app.3f504f92.js.map